# 中证500指数增强策略：规避过度自信偏差

本项目基于国信证券金融工程专题研究报告《行为金融学系列之三：过度自信与投资者行为》（2019年6月10日）的核心思想，实现了一个旨在规避投资者过度自信偏差的中证500指数增强策略。

## 策略逻辑

该策略认为，股票的换手率可以作为衡量投资者过度自信程度的一个代理指标。高换手率的股票可能聚集了更多过度自信的投资者，导致股价被高估，未来预期收益较低。相反，低换手率的股票未来预期收益可能更高。

策略的核心步骤如下（每月调仓）：

1.  **获取成分股与权重：** 获取调仓日的中证500指数成分股列表及其官方权重。
2.  **计算换手率：** 计算每只成分股在上一个月的平均日换手率（日成交量 / 流通股本）。
3.  **分组：**
    *   将成分股按上月平均日换手率从低到高排序。
    *   选出换手率最低的100只股票（低换手组）。
    *   选出换手率最高的100只股票（高换手组）。
    *   剩余股票为中间组。
4.  **权重调整：**
    *   **剔除高换手组：** 策略不持有高换手组的100只股票，其目标权重设为0。
    *   **权重再分配：** 将被剔除的高换手组股票的原始权重之和，按照低换手组内各股票的原始权重比例，分配给低换手组的股票。即，低换手组股票的新权重 = 原始权重 + (原始权重 / 低换手组总原始权重) * 高换手组总原始权重。
    *   **保持中间组：** 中间组股票的权重保持其原始指数权重不变。
5.  **生成组合：** 得到最终的目标持仓及权重。确保最终权重之和为1。

## 数据要求

运行此策略需要以下金融数据：

*   **中证500历史成分股列表及权重：** 需要每个调仓日的准确数据。
*   **A股历史日行情数据：** 至少包含每日成交量。
*   **A股历史股本数据：** 至少包含每日流通股本（用于计算换手率）。

**重要：** 代码中的 `get_csi500_constituents_and_weights` 和 `get_stock_data` 函数是数据加载的**占位符**。您需要根据您使用的金融数据服务商（如 Wind, Tushare Pro, JoinQuant 等）提供的API，自行实现这两个函数的数据获取逻辑。

## 安装

1.  克隆本仓库（如果您将其放在Git仓库中）。
2.  安装所需的Python库：
    ```bash
    pip install -r requirements.txt
    ```
    如果您使用了特定的数据接口库（如 Tushare），请确保已将其添加到 `requirements.txt` 并安装。

## 使用

1.  **实现数据加载函数：** 修改 `strategy.py` 文件中的 `get_csi500_constituents_and_weights` 和 `get_stock_data` 函数，接入您的数据源。
2.  **运行策略：**
    ```bash
    python strategy.py
    ```
    默认情况下，脚本会计算并打印 `2019-06-01` 这个调仓日的目标投资组合（权重最高的几只）。您可以修改 `if __name__ == "__main__":` 部分的 `rebalance_date` 来测试不同的日期。

## 注意事项与免责声明

*   本代码仅为策略思想的实现框架，不构成任何投资建议。
*   金融市场风险莫测，历史回测表现不代表未来收益。
*   策略的实际表现高度依赖于所用数据的准确性和及时性。
*   未考虑交易成本（佣金、印花税、滑点等）对策略收益的影响，实际应用中需要纳入考量。
*   代码中对数据缺失、分组数量不足等情况做了简单处理，实际应用中可能需要更鲁棒的异常处理逻辑。
*   请在进行任何实际投资前，进行充分的回测、研究和风险评估。
